{% extends "base.html" %}
{% block title %}home{% endblock %}
{% block content %}
<div class='w-full h-full bg-primary-50'>
	<ul>
		<li>
			<button hx-get="/set_language?lang=ar" hx-target='body' hx-trigger='click'>
				ar
			</button>
		</li>
		<li>
			<button hx-get="/set_language?lang=en" hx-target='body' hx-trigger='click'>
				en
			</button>
		</li>
	</ul>
</div>
{% endblock %}

{% block extra_scripts %}
<script>
	document.addEventListener('htmx:afterRequest', function(evt) {
		const path = evt.detail.pathInfo.requestPath;
		if (path.match('set_language') && evt.detail.successful) {
			const locale =path.match('(?<=lang=)[a-z]{2}')[0]; 
			document.documentElement.lang =  locale;
			if (locale === 'ar') {
				document.dir = 'rtl';
			} else {
				document.dir = 'ltr';
			}
		}
	})

	// initial page load
	document.addEventListener('DOMContentLoaded', function() {
		const locale = document.documentElement.lang;
		if (locale === 'ar') {
			document.dir = 'rtl';
		} else {
			document.dir = 'ltr';
		}
	})
</script>
{% endblock %}
