<!-- Team Members Tab -->
{% macro render_team_table(team_members, page=1, total_pages=1) %}
<div
  id="modal-container"
  class="bg-primary-50 rounded-xl shadow-sm transition-all duration-200"
>
  <!-- Header Section -->
  <div class="flex justify-between items-center mb-6">
    <h2 class="text-2xl font-bold text-gray-900">{{ _("team_members") }}</h2>
    <button
      class="flex items-center px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 bg-primary-600 text-white hover:bg-primary-700 focus:ring-2 focus:ring-primary-500 focus:outline-none"
      hx-get="/dashboard/new-team-member"
      hx-target="#modal-container"
      hx-swap="innerHTML"
    >
      <img
        class="w-5 h-5 mr-2"
        src="{{ url_for('static', filename='icons/add.svg') }}"
        alt="Add Icon"
      />
      {{ _("add_team_member") }}
    </button>
  </div>

  <!-- Filter Section Wrapped in a Form -->
  <form
    hx-get="/dashboard/team-members"
    hx-target="#team-list"
    hx-swap="innerHTML"
    hx-indicator="#loading-indicator"
    class="mb-6 flex flex-col space-y-4 sm:flex-row sm:space-x-4 sm:space-y-0"
  >
    <!-- Search Input -->
    <input
      type="text"
      id="search-input"
      name="search"
      value="{{ search | default('') }}"
      placeholder="{{ _('search_team_member') }}"
      class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"
      hx-trigger="keyup changed delay:500ms"
      hx-get="/dashboard/team-members"
      hx-target="#team-list"
      hx-swap="innerHTML"
    />
  </form>

  <!-- Team Member List -->
  <div id="team-list">{% include 'partials/dashboard/team_list.html' %}</div>

  <!-- Pagination -->
  <div class="mt-6 flex justify-center space-x-2">
    {% if page and page > 1 %}
    <button
      class="px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 bg-primary-100 text-primary-700 hover:bg-primary-200 focus:ring-2 focus:ring-primary-500 focus:outline-none"
      hx-get="/dashboard?q=team-members&page={{ page - 1 }}"
      hx-target="#team-list"
      hx-swap="innerHTML"
    >
      {{ _("previous") }}
    </button>
    {% endif %}
    <span class="px-4 py-2 text-sm font-medium text-gray-700">
      {{ page }} / {{ total_pages }}
    </span>
    {% if page and page < total_pages %}
    <button
      class="px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 bg-primary-100 text-primary-700 hover:bg-primary-200 focus:ring-2 focus:ring-primary-500 focus:outline-none"
      hx-get="/dashboard?q=team-members&page={{ page + 1 }}"
      hx-target="#team-list"
      hx-swap="innerHTML"
    >
      {{ _("next") }}
    </button>
    {% endif %}
  </div>
</div>
{% endmacro %}

<!-- Render the Macro -->
{{ render_team_table(team_members, page, total_pages) }}
